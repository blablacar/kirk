import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs/blocks'

import { color } from '../_utils/branding'
import { MeetingPointIcon } from '../icon/meetingPoint'
import { Distances, Proximity, ProximityDisplay } from '../proximity'
import { Stepper, StepperDisplay } from '../stepper'
import { Addon, Connection, HiddenStop, HiddenStops, Itinerary, Lines, Place } from './index'

<Meta title="Widgets/NewItinerary" />

# **Itinerary**

### Search result

<Canvas>
  <Story name="Search">
    <Itinerary>
      <Place
        label="Villepinte"
        time="12:50"
        proximity={<Proximity value={Distances.FAR} title="You'll have to take transports" />}
      />
      <Place
        label="Lyon"
        time="18:00"
        proximity={<Proximity value={Distances.CLOSE} title="You'll get there by foot" />}
      />
    </Itinerary>
  </Story>
</Canvas>

### Ride details - carpooling

<Canvas>
  <Story name="Ride details - Carpool">
    <Itinerary>
      <Place
        label="Villepinte"
        time="12:50"
        proximity={<Proximity value={Distances.FAR} title="3.7 km from your departure" display={ProximityDisplay.LABEL} />}
        href="https://blablacar.fr"
      />
      <Place
        label="Lyon"
        time="18:00"
        proximity={<Proximity value={Distances.CLOSE} title="400m from your arrival" display={ProximityDisplay.LABEL} />}
        href="https://blablacar.fr"
      />
      <Addon label="Marseille" />
    </Itinerary>
  </Story>
</Canvas>

### Ride details - bus

<Canvas>
  <Story name="Ride details - Bus">
    <Itinerary>
      <Addon label="Lille" />
      <Place
        time="09:00"
        label="Paris"
        subLabel="Gare de lyon"
      />
      <HiddenStops label="2 stopovers">
        <HiddenStop label="Paris" />
        <HiddenStop label="Dijon" />
      </HiddenStops>
      <Place time="12:00" label="Lyon" subLabel="Gare Perrache" />
      <Connection label="Change of vehicle" />
      <Place time="12:30" label="Lyon" subLabel="Gare Perrache" />
      <HiddenStops label="2 stopovers">
        <HiddenStop label="Grenoble" />
        <HiddenStop label="Aix-en-Provence" />
      </HiddenStops>
      <Place time="16:00" label="Marseille" />
      <Addon label="Montpellier" />
    </Itinerary>
  </Story>
</Canvas>

### Ride Plan

<Canvas>
  <Story name="Carpooling Ride Plan">
    <Itinerary>
      <Place
        label="Paris"
        subLabel="6 rue M√©nars"
        time="00:00"
        href="https://blablacar.fr"
      />
      <Place
        label="Caen"
        subLabel="Esplanade Jean-Marie Louvel"
        time="03:00"
        href="https://blablacar.fr"
      />
    </Itinerary>
  </Story>
</Canvas>

### Booking request - boost version

<Canvas>
  <Story name="Booking request boost">
    <Itinerary>
      <Addon label="Caen" />
      <Place
        label="Evreux"
        subLabel="67 avenue du pr√©sident Wilson"
        time="12:00"
        href="https://blablacar.fr"
        bullet={<MeetingPointIcon iconColor={color.blue} />}
        highlighted
      />
      <Place
        label="Paris"
        subLabel="6 rue m√©nars"
        time="17:00"
        href="https://blablacar.fr"
      />
    </Itinerary>
  </Story>
</Canvas>

### Meeting points during publication

<Canvas>
  <Story name="Meeting points">
    <Itinerary small>
      <Addon label="Carnac" />
      <Place
        label="Parking rue de Lorient"
        subLabel="Rennes"
        href="https://blablacar.fr"
        prevLine={Lines.INACTIVE}
        nextLine={Lines.INACTIVE}
      />
      <Place
        label="Aire de covoiturage de Saint-Saturnin"
        subLabel="Saint-Saturnin"
        href="https://blablacar.fr"
        prevLine={Lines.INACTIVE}
        nextLine={Lines.INACTIVE}
      />
      <Addon label="Paris" />
    </Itinerary>
  </Story>
</Canvas>

### Price choice during publication

<Canvas>
  <Story name="Price choice during publication">
    <Stepper
      display={StepperDisplay.SMALL}
      leftAddon={(
        <Itinerary small>
          <Place label="Paris" />
          <Place label="Nantes" />
        </Itinerary>
      )}
    />
  </Story>
</Canvas>

## Specifications

Use it to show existing rides/bookings.
Never use it to show a member‚Äôs travel intent.

### Behaviour

- ‚úÖ Can be clickable
- ‚ÑπÔ∏è Unlimited number of lines of text
- üñä No editable text. The text in this component is pulled directly from the database.

### Hidden Stops

For bus trips we‚Äôll show the tappable number of stops in between DEPARTURE/DESTINATION itinerary elements on ride details.

After tapping on the number of stops the itinerary should expand to reveal all the stops.
Even though it‚Äôs not visually suggested, tapping on any of the revealed stops should make the itinerary collapse again.

### Connection

Use it in order to indicate to users that there is change between 2 intermediary stops.

- ‚úÖ Use when you want to indicate a change of vehicle
- ‚úÖ Use when you want to indicate a change of station
- ‚õîÔ∏è Do not use to at the beginning of an Itinerary
- ‚õîÔ∏è Do not use to after an Itinerary departure with proximity
- ‚õîÔ∏è Do not use to before an Itinerary destination with proximity

## Usage

```jsx
import { Itinerary } from '@blablacar/ui-library/build/newItinerary'
;<Itinerary />
```

### Itinerary props
<ArgsTable of={Itinerary} />

### Place props
<ArgsTable of={Place} />

### Addon props
<ArgsTable of={Addon} />

### Connection props
<ArgsTable of={Connection} />

### HiddenStop props
<ArgsTable of={HiddenStop} />

### HiddenStops props
<ArgsTable of={HiddenStops} />
