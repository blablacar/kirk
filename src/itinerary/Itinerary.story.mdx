import { Meta, Preview, Props, Story } from '@storybook/addon-docs/blocks'

import { BaseSection } from '../layout/section/baseSection'
import { Distances, Proximity } from '../proximity'
import { Itinerary } from './index'

<Meta title="Widgets|Itinerary" />

export const places = [
  {
    time: '09:00',
    isoDate: '2017-12-11T09:00',
    stepAriaLabel: 'Pickup location',
    mainLabel: 'Porte de Vincennes',
    subLabel: 'Paris',
    actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
    href: '#',
  },
  {
    time: '10:00',
    isoDate: '2017-12-11T10:00',
    stepAriaLabel: 'Stopover',
    mainLabel: 'Poitiers',
    subLabel: 'Poitiers',
  },
  {
    time: '11:00',
    isoDate: '2017-12-11T10:00',
    stepAriaLabel: 'Stopover',
    mainLabel: 'Angouleme',
    subLabel: 'Angouleme',
  },
  {
    time: '15:00',
    isoDate: '2017-12-11T15:00',
    stepAriaLabel: 'Dropoff location',
    mainLabel: 'Gare Bordeaux Saint-Jean',
    subLabel: 'Bordeaux',
    href: '#',
    connectionLabel: 'Change of vehicle',
  },
]

export const places2 = [
  {
    time: '15:00',
    isoDate: '2017-12-11T15:00',
    stepAriaLabel: 'Pickup location',
    mainLabel: 'Gare Bordeaux Saint-Jean',
    subLabel: 'Bordeaux',
  },
  {
    time: '16:00',
    isoDate: '2017-12-11T12:00',
    stepAriaLabel: 'Stopover',
    mainLabel: 'Agen',
    subLabel: "Gare d'Agen",
  },
  {
    time: '16:00',
    isoDate: '2017-12-11T12:00',
    stepAriaLabel: 'Stopover',
    mainLabel: 'Agen',
    subLabel: "Hotel de ville d'Agen",
  },
  {
    time: '17:00',
    isoDate: '2017-12-11T12:00',
    stepAriaLabel: 'Stopover',
    mainLabel: 'Langon',
    subLabel: 'Langon Hotel de ville',
  },
  {
    time: '16:00',
    isoDate: '2017-12-11T12:00',
    stepAriaLabel: 'Stopover',
    mainLabel: 'Langon',
    subLabel: 'Gare de Langon',
  },
  {
    time: '19:00',
    isoDate: '2017-12-11T19:00',
    stepAriaLabel: 'Dropoff location',
    mainLabel: 'Gare De Toulouse',
    subLabel: 'Toulouse',
    href: '#',
    actionAriaLabel: '19:00 Gare De Toulouse (New page with a map)',
  },
]

export const placesWithOneStopover = [
  {
    time: '09:00',
    stepAriaLabel: 'Pickup location',
    isoDate: '2017-12-11T09:00',
    mainLabel: 'Porte de Vincennes',
    subLabel: 'Paris',
    actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
    href: '#',
  },
  {
    time: '12:00',
    isoDate: '2017-12-11T12:00',
    stepAriaLabel: 'Pick up/drop off location',
    mainLabel: 'Gare de Tours',
    subLabel: 'Tours',
    actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
  },
  {
    time: '19:00',
    isoDate: '2017-12-11T19:00',
    stepAriaLabel: 'Pick up/drop off location',
    mainLabel: 'Gare Bordeaux Saint-Jean',
    subLabel: 'Bordeaux',
    href: '#',
  },
]

export const placesWithStopovers = [
  {
    time: '09:00',
    stepAriaLabel: 'Pickup location',
    isoDate: '2017-12-11T09:00',
    mainLabel: 'Porte de Vincennes',
    subLabel: 'Paris',
    actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
    href: '#',
  },
  {
    time: '12:00',
    isoDate: '2017-12-11T12:00',
    stepAriaLabel: 'Pick up/drop off location',
    mainLabel: 'Gare de Tours',
    subLabel: 'Tours',
    actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
    href: '#',
  },
  {
    time: '15:00',
    isoDate: '2017-12-11T15:00',
    stepAriaLabel: 'Pick up/drop off location',
    mainLabel: 'Gare',
    subLabel: 'Nogent-le-Rotrou',
    actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
    href: '#',
  },
  {
    time: '19:00',
    isoDate: '2017-12-11T19:00',
    stepAriaLabel: 'Pick up/drop off location',
    mainLabel: 'Gare Bordeaux Saint-Jean',
    subLabel: 'Bordeaux',
  },
]

# **Itinerary**

## Default

<Preview>
  <Story name="Default">
    <BaseSection>
      <h1 id="titleId">Title example</h1>
      <Itinerary
        aria-labelledby="titleId"
        fromAddon="Lille"
        fromAddonAriaLabel="Driver departure"
        toAddon="Biarritz"
        toAddonAriaLabel="Driver arrival"
        places={placesWithOneStopover}
        highlightRoad
      />
    </BaseSection>
  </Story>
</Preview>

## With proximity

<Preview>
  <Story name="With proximity">
    <BaseSection>
      <Itinerary
        fromAddon="Lille"
        fromAddonAriaLabel="Driver departure"
        toAddon="Biarritz"
        toAddonAriaLabel="Driver arrival"
        places={[
          {
            stepAriaLabel: 'Pick up location',
            mainLabel: 'Paris',
            subLabel: <Proximity value={Distances.FAR} title="Distance from the pick up point" />,
            isoDate: '2017-12-11T09:00',
            time: '09:00',
            href: '#',
          },
          {
            stepAriaLabel: 'Drop off location',
            mainLabel: 'Bordeaux',
            subLabel: (
              <Proximity value={Distances.CLOSE} title="Distance from the drop off point" />
            ),
            isoDate: '2017-12-11T12:00',
            time: '12:00',
          },
        ]}
        headline="Mon 11 December"
      />
    </BaseSection>
  </Story>
</Preview>

## With proximity pills

<Preview>
  <Story name="With stopovers">
    <BaseSection>
      <Itinerary
        aria-label="Ride plan"
        fromAddon="Lille"
        fromAddonAriaLabel="Driver departure"
        toAddon="Biarritz"
        toAddonAriaLabel="Driver arrival"
        places={placesWithStopovers}
        headline="Mon 11 December"
      />
    </BaseSection>
  </Story>
</Preview>

## With segments & stopovers

`segments` is an array of itinerary `places`. It's used to show connection between multiples vehicles.

<Preview>
  <Story name="With segments & stopovers">
    <BaseSection>
      <Itinerary
        aria-label="Ride plan"
        fromAddon="Lille"
        fromAddonAriaLabel="Driver departure"
        toAddon="Biarritz"
        toAddonAriaLabel="Driver arrival"
        places={[]}
        segmentCollapsedLabels={['2 stops', '4 stops']}
        segments={[places, places2]}
        headline="Mon 11 December"
        isCollapsible
      />
    </BaseSection>
  </Story>
</Preview>

## With single stopover

<Preview>
  <Story name="With single stopover">
    <BaseSection>
      <Itinerary
        fromAddon="Lille"
        toAddon="Biarritz"
        places={[
          {
            time: '09:00',
            isoDate: '2017-12-11T09:00',
            subLabel: 'Porte de Vincennes',
            mainLabel: 'Paris',
          },
        ]}
        headline="Mon 11 December"
      />
    </BaseSection>
  </Story>
</Preview>

## Without time

<Preview>
  <Story name="Without time">
    <BaseSection>
      <Itinerary
        fromAddon="Lille"
        toAddon="Biarritz"
        places={[
          {
            isoDate: '2017-12-11T09:00',
            subLabel: 'Porte de Vincennes',
            mainLabel: 'Paris',
          },
          {
            isoDate: '2017-12-11T15:00',
            subLabel: 'Gare Bordeaux Saint-Jean',
            mainLabel: 'Bordeaux',
          },
        ]}
        headline="Mon 11 December"
      />
    </BaseSection>
  </Story>
</Preview>

## Small

<Preview>
  <Story name="Small">
    <BaseSection>
      <Itinerary
        places={[
          {
            time: '09:00',
            isoDate: '2017-12-11T09:00',
            stepAriaLabel: 'Pickup location',
            mainLabel: 'Porte de Vincennes',
            subLabel: 'Paris',
            actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
          },
          {
            time: '15:00',
            isoDate: '2017-12-11T15:00',
            stepAriaLabel: 'Dropoff location',
            mainLabel: 'Gare Bordeaux Saint-Jean',
            subLabel: 'Bordeaux',
            connectionLabel: 'Change of vehicle',
          },
        ]}
        small
      />
    </BaseSection>
  </Story>
</Preview>

## Usage

```jsx
import { Itinerary } from '@blablacar/ui-library/build/Itinerary'
<div>
  <h1 id="titleId">Title example</h1>
  <Itinerary
    aria-labelledby="titleId"
    fromAddon="Lille"
    fromAddonAriaLabel="Driver departure"
    toAddon="Biarritz"
    toAddonAriaLabel="Driver arrival"
    places={[
      {
        time: '09:00',
        stepAriaLabel: 'Pickup location',
        isoDate: '2017-12-11T09:00',
        mainLabel: 'Porte de Vincennes',
        subLabel: 'Paris',
        actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
        href: '#',
      },
      {
        time: '12:00',
        isoDate: '2017-12-11T12:00',
        stepAriaLabel: 'Pick up/drop off location',
        mainLabel: 'Gare de Tours',
        subLabel: 'Tours',
        actionAriaLabel: '09:00 Paris Porte de Vincennes (New page with a map)',
      },
      {
        time: '19:00',
        isoDate: '2017-12-11T19:00',
        stepAriaLabel: 'Pick up/drop off location',
        mainLabel: 'Gare Bordeaux Saint-Jean',
        subLabel: 'Bordeaux',
        href: '#',
      },
    ]}
    headline="Mon 11 December"
    collapsedLabel="2 stops"
    collapsedAriaProps={{
      'aria-label': 'Show or hide all stops',
    }}
  />
</div>
```

<Props of={Itinerary} />
